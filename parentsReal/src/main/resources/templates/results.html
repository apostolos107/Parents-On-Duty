<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <title>Αποτελέσματα Αναζήτησης</title>

    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <script type="text/javascript" src="/js/datepicker/jquery.min.js"></script>
    <script type="text/javascript" src="/js/datepicker/moment.min.js"></script>
    <style type="text/css">
      .demo { position: relative; }
      .demo i {
        position: absolute; bottom: 10px; right: 24px; top: auto; cursor: pointer;
      }
    </style>
    <!-- Custom CSS -->
    <link href="/css/1-col-portfolio.css" rel="stylesheet"/>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <div th:replace="top_bar_only_login :: 'head-top-bar'"></div>
	<!--For Background-->
	<style>

	body, html {
	  height: 100%;
	  margin: 0;
	  font: 400 15px/1.8 "Lato", sans-serif;
	}
	.bgimg-1, .bgimg-2, .bgimg-3 {
	  position: relative;
	  opacity: 0.4;
	  background-position: center;
	  background-repeat: no-repeat;
	  background-size: cover;

	}
	.bgimg-1 {
	  background-image: url("/css/resultbackground.jpg");
	  height: 100%;
	  background-attachment: fixed;
	  overflow:scroll;
	}

	.caption {
	  position: absolute;
	  left: 0;
	  top: 50%;
	  width: 100%;
	  text-align: center;
	  color: #000;
	}

	</style>
</head>

<body>
    <script th:inline="javascript">
        var map;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat:37.97945,lng:23.71622},
                zoom: 6
            });
        }
        function addMarker(latArg,lngArg,tilteArg){
            var latlng={lat:latArg,lng:lngArg}
            var marker = new google.maps.Marker({
                position: latlng,
                map: map ,
                title : tilteArg
            });
        }
    </script>
    <!-- Navigation -->
    <nav th:replace=" top_bar_only_login :: 'nav-bar-only-login' ">	</nav>
    <br/>
	<!--Background Image-->
	<div class="bgimg-1"></div>
<!-- Page Content -->

    <div class="container">
			<div class="col-xs-12 col-md-6 col-sm-12" id="left">
				<h1 class="page-header" th:text="'Αποτελέσματα Αναζήτησης ('+( ${searchResults!=null} ? ${searchResults.size()} : 0) +')'"></h1>
                <script>
                function show_search(){
                    document.getElementById("button_show").style.display="none";
                    document.getElementById("button_hide").style.display="block";
                    document.getElementById("search_bar").style.display="block";
                }
                </script>
                <script>
                function hide_search(){
                    document.getElementById("button_show").style.display="block";
                    document.getElementById("button_hide").style.display="none";
                    document.getElementById("search_bar").style.display="none";
                }
                </script>
                <button id="button_show" type="button" class="btn btn-primary " onclick="show_search()">Μήπως Ψάχνεις Κάτι Άλλο;</button>
                <button id="button_hide" type="button" class="btn btn-primary " onclick="hide_search()">Κλείσιμο Αναζήτησης</button>
                <!-- The searh-->
                <form  action="/results" method="get" id="AboutSearches">

                <div id="search_bar">
                    <div class="form-group">
                        <label for="Address_Search">Αναζήτηση Εκδήλωσης</label>
                        <input type="text" data-date-format="dd/mm/yyyy" class="form-control" id="Address_Search" name="free_text" placeholder="Καλοκαίρι Με Ποδόσφαιρο" aria-describedby="helpQuery" th:value=" ${allParams!=null} ? ${allParams.get('free_text')} :'' "/>
                        <i class="fa fa-building-o form-control-feedback"></i>
                        <span id="helpQuery" class="help-block hidden">Σε τι βοηθαει αυτο;</span>
                    </div>
                    <div class="form-group">
                        <label for="config-demo">Επιλογή ημερομηνίας διοργάνωσης</label>
                        <input type="text" id="config-demo" name="Dates" class="form-control" value=""/>
                        <!--<input type="text" id="config-demo" name="Dates" class="form-control" value="" th:value="${allParams!=null} ? ${allParams.get('Dates')} : ''"/>-->
                    </div>
                    <div class=" col-md-4 ">
                        <div class="form-group">
                            <label for="Prices">Εύρος Τιμών</label>
                            <select name="Price" id="Prices"  class="form-control" th:selected="${allParams!=null} ? ${allParams.get('Price')} : 1 ">
                                <option value="1"></option>
                                <option value="2">1-5</option>
                                <option value="3">5-10</option>
                                <option value="4">10-15</option>
                                <option value="5">15-20</option>
                                <option value="6">20-25</option>
                            </select>
                        </div>
                    </div>
                    <div class=" col-md-4  ">
                        <div class="form-group">
                            <label for="Age">Ηλικία</label>
                            <input type="number" id="Age" class="form-control" name="Age" min="1" max="15" value="2" th:value="${allParams!=null} ? ${allParams.get('Age')} : ''"/>
                        </div>
                    </div>
                    <div class=" col-md-4 ">
                        <div class="form-group">
                            <label for="distance">Αποσταση</label>
                            <input type="number" class="form-control" id="distance" name="distance" min="1" max="30" th:value="${allParams!=null} ? ${allParams.get('distance')} : ''"/>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-info btn-lg btn-block search_button" form="AboutSearches" value="Submit"><i class="fa fa-search" aria-hidden="true">Αναζήτηση</i></button>
                </div>
                </form>

                <!--   END  -->
				<th:block th:unless="${searchResults== null || searchResults.size() == 0}" th:each="oneEvent : ${searchResults}">
					<hr/>
					<a  style="color: black !important;" th:href="'/event?id='+${oneEvent.id}"><h2 th:text="${oneEvent.name}"></h2></a>
					<div class="row">
						<div class="col-sm-6">
							<a th:href="'/event?id='+${oneEvent.id}">
								<img  class="img-responsive" th:src="${oneEvent.imagePath}" alt=""/>
							</a>
						</div>
						<div class="col-sm-6">
							<h4 th:text=" 'Τιμή : ' + ${oneEvent.price}/100 + '€'"></h4>
							<h4 th:text=" 'Διεύθυνση : ' + ${oneEvent.address}"></h4>
							<h4 th:text=" 'Ημερομηνία : ' + ${#dates.format(oneEvent.day,'dd/MM/yyyy')}"></h4>
							<br/>
						</div>
						<div class="ratings">
							<!--<p th:text="${oneEvent.eventsfeedbacks.size()} + ' Review'" class="pull-right">3 Αξιολογήσεις</p>-->
							<p>
								<span class="glyphicon glyphicon-star"></span>
								<span class="glyphicon glyphicon-star"></span>
								<span class="glyphicon glyphicon-star"></span>
								<span class="glyphicon glyphicon-star"></span>
								<span class="glyphicon glyphicon-star-empty"></span>
								4.0 Αστέρια
							</p>
						</div>
					</div>
				</th:block>
            	<h2 th:if="${searchResults== null || searchResults.size() == 0}">Δε βρέθηκε κάποιο αποτέλεσμα</h2>
           	</div>
	            <div class="col-xs-12 col-md-6 col-sm-12" id="right">
	                    <div class="iframe-container">
	            			<div id="map" style="background:yellow"></div>
	                	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBA0LB9wygyf715poPbZLtVZe5roaQjOkM&amp;callback=initMap"></script>
						</div>
	            </div>
    </div>
    <th:block th:unless="${searchResults== null || searchResults.size() == 0}" th:each="oneEvent : ${searchResults}">
        <script th:inline="javascript">
            /*[+
            addMarker([[${oneEvent.lat}]],[[${oneEvent.lon}]],[[${oneEvent.name}]])
             +]*/
        </script>
    </th:block>

    <!-- /.container -->

    <!-- jQuery -->
    <script src="/js/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        $(function() {

          $('input[name="Dates"]').daterangepicker({
              autoUpdateInput: false,
              locale: {

                  cancelLabel: 'Clear'

              }
          });



          $('input[name="Dates"]').on('apply.daterangepicker', function(ev, picker) {
              $(this).val(picker.startDate.format('DD/MM/YYYY') + ' - ' + picker.endDate.format('DD/MM/YYYY'));
          });

          $('input[name="Dates"]').on('cancel.daterangepicker', function(ev, picker) {
              $(this).val('');
          });

        });
    </script>
    <link rel="stylesheet" type="text/css" media="all" href="/js/datepicker/daterangepicker.css" />
    <script type="text/javascript" src="/js/datepicker/daterangepicker.js"></script>

</body>

</html>
